---
export const prerender = false;

import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<!doctype html>
<html lang="es">
	<head>
		<BaseHead title="Test AdSense - AmerAI" description="Página de prueba para verificar Google AdSense" />
	</head>
	<body class="bg-gray-50">
		<Header />
		
		<main>
			<!-- Hero Section -->
			<section class="bg-gradient-to-br from-gray-900 via-gray-800 to-green-900 text-white py-20">
				<div class="container mx-auto px-6 text-center">
					<h1 class="text-5xl md:text-6xl font-bold mb-6">
						Test <span class="text-green-400">AdSense</span>
					</h1>
					<p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
						Página de prueba para verificar que Google AdSense funciona correctamente
					</p>
				</div>
			</section>

			<!-- Test AdSense 1 - Banner Superior -->
			<section class="container mx-auto px-6 py-8">
				<h2 class="text-2xl font-bold mb-4">Banner Superior</h2>
				<div class="bg-white rounded-lg shadow-md p-4 mb-8 min-h-[250px]">
					<ins class="adsbygoogle"
						style="display:block; min-height:200px;"
						data-ad-client="ca-pub-4946584433561362"
						data-ad-slot="2062230511"
						data-ad-format="auto"
						data-full-width-responsive="true"></ins>
					<script is:inline>
						try {
							(adsbygoogle = window.adsbygoogle || []).push({});
						} catch (e) {
							console.error('AdSense error:', e);
						}
					</script>
				</div>
			</section>

			<!-- Contenido de ejemplo -->
			<section class="container mx-auto px-6 py-8">
				<div class="bg-white rounded-lg shadow-md p-8">
					<h2 class="text-3xl font-bold mb-6">Contenido de Ejemplo</h2>
					<p class="text-lg text-gray-700 mb-4">
						Este es contenido de ejemplo para separar los anuncios y verificar que se muestran correctamente.
					</p>
					<p class="text-gray-600 mb-4">
						Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
						Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</p>
					<p class="text-gray-600 mb-4">
						Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
						Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
					</p>
				</div>
			</section>

			<!-- Test AdSense 2 - Banner Medio -->
			<section class="container mx-auto px-6 py-8">
				<h2 class="text-2xl font-bold mb-4">Banner Medio</h2>
				<div class="bg-white rounded-lg shadow-md p-4 mb-8 min-h-[250px]">
					<ins class="adsbygoogle"
						style="display:block; min-height:200px;"
						data-ad-client="ca-pub-4946584433561362"
						data-ad-slot="2062230511"
						data-ad-format="auto"
						data-full-width-responsive="true"></ins>
					<script is:inline>
						try {
							(adsbygoogle = window.adsbygoogle || []).push({});
						} catch (e) {
							console.error('AdSense error:', e);
						}
					</script>
				</div>
			</section>

			<!-- Más contenido -->
			<section class="container mx-auto px-6 py-8">
				<div class="bg-white rounded-lg shadow-md p-8">
					<h2 class="text-3xl font-bold mb-6">Más Contenido</h2>
					<p class="text-lg text-gray-700 mb-4">
						Más contenido para verificar el espaciado y la visualización de anuncios.
					</p>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<div class="bg-gray-100 p-4 rounded">
							<h3 class="font-bold mb-2">Columna 1</h3>
							<p class="text-gray-600">Contenido de la primera columna para crear más altura en la página.</p>
						</div>
						<div class="bg-gray-100 p-4 rounded">
							<h3 class="font-bold mb-2">Columna 2</h3>
							<p class="text-gray-600">Contenido de la segunda columna para crear más altura en la página.</p>
						</div>
					</div>
				</div>
			</section>

			<!-- Test AdSense 3 - Banner Inferior -->
			<section class="container mx-auto px-6 py-8">
				<h2 class="text-2xl font-bold mb-4">Banner Inferior</h2>
				<div class="bg-white rounded-lg shadow-md p-4 min-h-[250px]">
					<ins class="adsbygoogle"
						style="display:block; min-height:200px;"
						data-ad-client="ca-pub-4946584433561362"
						data-ad-slot="2062230511"
						data-ad-format="auto"
						data-full-width-responsive="true"></ins>
					<script is:inline>
						try {
							(adsbygoogle = window.adsbygoogle || []).push({});
						} catch (e) {
							console.error('AdSense error:', e);
						}
					</script>
				</div>
			</section>

			<!-- Debug info -->
			<section class="container mx-auto px-6 py-8">
				<div class="bg-yellow-100 border-l-4 border-yellow-500 p-4">
					<h3 class="font-bold text-yellow-800 mb-2">Debug Information</h3>
					<p class="text-yellow-700 text-sm">
						• AdSense Client ID: ca-pub-4946584433561362<br>
						• Slot ID: 2062230511<br>
						• Si los anuncios no aparecen, verifica en la consola del navegador<br>
						• Los anuncios pueden tardar unos segundos en cargarse<br>
						• En desarrollo, los anuncios pueden mostrar espacios en blanco
					</p>
				</div>
			</section>
		</main>
		
		<Footer />

		<!-- Script adicional para debug -->
		<script is:inline>
			// Debug script para AdSense
			window.addEventListener('load', function() {
				console.log('=== AdSense Debug Information ===');
				console.log('adsbygoogle disponible:', !!window.adsbygoogle);
				console.log('adsbygoogle array length:', window.adsbygoogle?.length || 0);
				console.log('AdSense elements encontrados:', document.querySelectorAll('.adsbygoogle').length);
				
				// Verificar si el script de AdSense se cargó
				const adsenseScript = document.querySelector('script[src*="adsbygoogle.js"]');
				console.log('Script AdSense cargado:', !!adsenseScript);
				
				// Verificar estado de los anuncios después de 3 segundos
				setTimeout(() => {
					console.log('=== Estado de Anuncios (3s después) ===');
					const ads = document.querySelectorAll('.adsbygoogle');
					ads.forEach((ad, index) => {
						const info = {
							index: index + 1,
							status: ad.getAttribute('data-ad-status'),
							client: ad.getAttribute('data-ad-client'),
							slot: ad.getAttribute('data-ad-slot'),
							height: ad.style.height || ad.offsetHeight + 'px',
							width: ad.style.width || ad.offsetWidth + 'px',
							display: ad.style.display,
							innerHTML: ad.innerHTML.length + ' chars',
							hasIframe: !!ad.querySelector('iframe')
						};
						console.log(`Anuncio ${info.index}:`, info);
						
						// Mostrar información visual en la página
						if (!ad.querySelector('.debug-info')) {
							const debugDiv = document.createElement('div');
							debugDiv.className = 'debug-info';
							debugDiv.style.cssText = 'background:#f0f0f0;padding:8px;margin:4px;font-size:12px;border-radius:4px;';
							debugDiv.innerHTML = `
								<strong>Debug Ad ${info.index}:</strong><br>
								Status: ${info.status || 'undefined'}<br>
								Height: ${info.height}<br>
								Width: ${info.width}<br>
								Iframe: ${info.hasIframe ? 'Sí' : 'No'}<br>
								Content: ${info.innerHTML} characters
							`;
							ad.parentElement.appendChild(debugDiv);
						}
					});
				}, 3000);
				
				// Verificar nuevamente después de 10 segundos
				setTimeout(() => {
					console.log('=== Estado Final (10s después) ===');
					const ads = document.querySelectorAll('.adsbygoogle');
					let working = 0;
					ads.forEach((ad, index) => {
						const hasContent = ad.innerHTML.length > 50 || ad.offsetHeight > 50;
						if (hasContent) working++;
						console.log(`Anuncio ${index + 1} funcionando:`, hasContent);
					});
					console.log(`Total anuncios funcionando: ${working}/${ads.length}`);
					
					// Mostrar resultado en la página
					const resultDiv = document.createElement('div');
					resultDiv.style.cssText = 'position:fixed;top:10px;right:10px;background:#333;color:white;padding:10px;border-radius:5px;z-index:9999;';
					resultDiv.innerHTML = `AdSense Status: ${working}/${ads.length} funcionando`;
					document.body.appendChild(resultDiv);
				}, 10000);
			});
		</script>
	</body>
</html>
